\documentclass{article}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%% package setup
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%


\usepackage[shortlabels]{enumitem}
\usepackage{amsfonts,amsmath, soul, matlab-prettifier, bm, amsthm,enumitem,amssymb,multirow,float,mathtools,bbm,array,varwidth,hyperref,bm}
\usepackage[all]{xy}
\usepackage[margin=0.9in]{geometry}
\usepackage{graphicx}
\usepackage{mathtools, caption, dsfont, tikz-cd}
\usepackage{wrapfig}

% tikzpicture

\usepackage{pgfplots}
\pgfplotsset{compat=1.15}
\usepackage{mathrsfs}
\usetikzlibrary{arrows}


\mathchardef\mhyphen="2D


\raggedbottom

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%% operators and symbols
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

% operators
\newcommand{\Hom}{\mathrm{Hom}}
\newcommand{\Ext}{\mathrm{Ext}}
\newcommand{\Ker}{\mathrm{Ker}}
\newcommand{\Pic}{\mathrm{Pic}}
\newcommand{\comp}{\mathrm{comp}}
\newcommand{\Proj}{\mathrm{Proj}}
\newcommand{\rk}{\mathrm{rk}}
\newcommand{\Spec}{\mathrm{Spec}}
\newcommand{\Sym}{\mathrm{Sym}}
\newcommand{\Frob}{\mathrm{Frob}}
\newcommand{\Gal}{\mathrm{Gal}}
\newcommand{\GL}{\mathrm{GL}}
\newcommand{\SL}{\mathrm{SL}}
\newcommand{\Ind}{\mathrm{Ind}}
\newcommand{\Rep}{\mathrm{Rep}}
\newcommand{\Aut}{\mathrm{Aut}}
\newcommand{\Res}{\mathrm{Res}}
\newcommand{\Smo}{\mathrm{Smo}}
\newcommand{\Span}{\mathrm{Span}}
\newcommand{\Frac}{\mathrm{Frac}}
\newcommand{\supp}{\mathrm{supp}}
\newcommand{\End}{\mathrm{End}}
\newcommand{\St}{\mathrm{St}}
\newcommand{\Top}{\mathrm{Top}}
\newcommand{\Ab}{\mathrm{Ab}}
\newcommand{\Set}{\mathrm{Set}}
\newcommand{\ad}{\mathrm{ad}}
\newcommand{\hht}{\mathrm{ht}}

\newcommand{\PGL}{\mathrm{PGL}}
\newcommand{\PSL}{\mathrm{PSL}}
\newcommand{\Psh}{\mathrm{Psh}}
\newcommand{\Sh}{\mathrm{Sh}}
\newcommand{\Id}{\mathrm{Id}}
\newcommand{\aff}{\mathrm{aff}}


% greek 
\newcommand{\calpha}{\check{\alpha}}
\newcommand{\cPhi}{\check{\Phi}}
\newcommand{\cbeta}{\check{\beta}}
\newcommand{\valpha}{\alpha^\vee}
\newcommand{\vbeta}{\beta^\vee}
\newcommand{\vPhi}{\Phi^\vee}

% shortcuts
\newcommand{\slii}{\mathfrak{sl}_2}
\newcommand{\sliii}{\mathfrak{sl}_3}
\newcommand{\gl}{\mathfrak{gl}}
\newcommand{\eW}{\widetilde{W_a}}


% mathcal
\newcommand{\cO}{\mathcal{O}}
\newcommand{\cR}{\mathcal{R}}
\newcommand{\cH}{\mathcal{H}}

% mathbb
\newcommand{\CC}{\mathbb{C}}
\newcommand{\FF}{\mathbb{F}}
\newcommand{\NN}{\mathbb{N}}
\newcommand{\PP}{\mathbb{P}}
\newcommand{\QQ}{\mathbb{Q}}
\newcommand{\RR}{\mathbb{R}}
\newcommand{\ZZ}{\mathbb{Z}}
\newcommand{\GG}{\mathbb{G}}
\newcommand{\adele}{\mathbb{A}}
\newcommand{\pp}{\mathfrak{p}}
\newcommand{\nn}{\mathfrak{n}}
\newcommand{\mm}{\mathfrak{m}}

% mathfrak
\newcommand{\fg}{\mathfrak{g}}
\newcommand{\fh}{\mathfrak{h}}
\newcommand{\fm}{\mathfrak{m}}

% shortcuts
\newcommand{\CG}{C_c^{\infty}(G)}
\newcommand{\cInd}{c\mhyphen\mathrm{Ind}}

\newcommand{\norm}[1]{\left\lVert#1\right\rVert}
\newcommand{\hatv}[1]{\overset{\vee}{\mathstrut#1}}

\DeclareMathOperator{\Ima}{Im}

\linespread{1.5}

\theoremstyle{plain}
\newtheorem{theorem}{Theorem}[section]
\newtheorem{question}[theorem]{Question}
\newtheorem{proposition}[theorem]{Proposition}
\newtheorem{convention}[theorem]{Convention}
\newtheorem{lemma}[theorem]{Lemma}
\newtheorem{cor}[theorem]{Corollary}
\newtheorem{algo}[theorem]{Algorithm}
\theoremstyle{definition}
\newtheorem{definition}[theorem]{Definition}
\newtheorem{notn}[theorem]{Notation}
\newtheorem{remark}[theorem]{Remark}
\newtheorem{example}[theorem]{Example}
\newtheorem{examples}[theorem]{Examples}
\newtheorem{fact}[theorem]{Fact}
\newtheorem*{hypothesis}{Hypothesis}
\newtheorem*{exercise}{Exercise}


\title{Quadratic Relations in Hecke Algebras}
\author{Albert Lopez Bruch}

\begin{document}
	\maketitle
	\pagenumbering{arabic}
    \section{Smooth representations and the Bernstein decomposition}

    Throughout this document, we let $F$ denote an arbitrary $p$-adic field with ring of integers $\mathcal{O}$, and residue field $k_F$ of characteristic $p>0$. Let $q=p^m$ be the cardinality of $k_F$ and let $\varpi$ be a uniformizer.

    Let $G$ denote a connected reductive group, defined and split over $\mathcal{O}$. The group $G(F)$ has a natural locally profinite topology coming from $F$. Fix an $F$-split
    maximal torus $T$ and a Borel subgroup $B$ containing $T$; assume $T$ and $B$ are defined over $\mathcal{O}$. Let $T_0=T(\mathcal{O})$ denote the maximal compact subgroup of $T(F)$. Let $\Phi\subset X^*(T)$ resp. $\Phi^\vee \subset X_*(T)$ denote the set of roots resp. coroots for $G$, $T$. Let $U$ resp. $\bar{U}$ denote the
    unipotent radical of $B$ resp. the Borel subgroup $\bar B \subset T$ opposite to $B$.

    %Let $\mathcal{B}(G,F)$ be the building of $G$ and let $\mathcal{A}(G,T,F)=X_*(T)\otimes\RR\subseteq \mathcal{B}(G,F)$ be the apartment corresponding to $T$, which comes equipped with a hyperplane structure arising from the affine roots. Let 
    %$$I=\langle T(\mathcal{\mathcal{O}}); \mathfrak{X}_\alpha(\mathcal{O}),\mathfrak{X}_{-\alpha}(\varpi\mathcal{O})\ |\ \alpha\in\Phi^+\rangle$$
    %be the Iwahori subgroup of $G$, and let $\textbf{a} \subset\mathcal{A}(G,T,F)$ be the unique alcove such that $G_{x,0}=I$ (first element in the Moy--Prasad filtration) for all $x\in\bf a$.

    Let $C$ be an algebraically closed field of characteristic $\ell\neq p$ and let $\cR_{C}(G)$ be the category smooth $C$-representations of $G$. That is, the objects of $\cR_{C}(G)$ are group homomorphisms $\pi: G\rightarrow GL(V)$ where $V$ is a $C$-vector space such that $\mathrm{Stab}_G(v)$ is an open subgroup of $G$ for all $v\in V$ (with respect to the locally profinite topology induced from $F$). If $V$ is finite dimensional, then the last condition is equivalent to $\ker\pi$ being open in $G(F)$. 

    If $C=\CC$, then the category $\cR_\CC(G)$ has a canonical decomposition. To state it, we consider the set of \textit{supercuspidal pairs} $(M,\sigma)$ where $M$ is an $F$-Levi subgroup of $G$ and $\sigma$ is a supercuspidal representation of $G$. 
    We say that two supercuspidal pairs $(M_1,\sigma_1)$ and $(M_2,\sigma_2)$ are \textit{inertially equivalent} if there exists some $g\in G(F)$ and \textit{unramified character} $\chi$ of $M_2$ such that $gM_1g^{-1}=M_2$ and $\prescript{g}{}{\sigma_1}\otimes\chi\cong \sigma_2$ as representations of $M_2$. We denote by $[M,\sigma]_G$ the conjugacy class of the pair $(M,\sigma)$, and we note that it is a union of $G$-conjugacy classes of supercuspidal pairs. Finally, let $\mathfrak{J}(G)=\{(M,\sigma)\text{ supercuspidal}\}/\sim$, where $\sim$ is inertial equivalence.

    If $(\pi,V)\in R_\CC(G)$ is irreducible, then there is some supercuspidal pair $(M,\sigma)$, unique up to $G$-conjugacy, such that $\pi$ is a subquotient of $i_P^G(\sigma)$, where $P=N\rtimes M$ is the unique parabolic subgroup with Levi factor $M$ and $i_P^G$ is the normalized parabolic induction. We call the $G$-conjugacy class $(M,\sigma)_G$ the supercuspidal support of $(\pi,V)$. For each $[M,\sigma]_G\in\mathfrak{J}(G)$, we define $\cR_{[M,\sigma]}(G)$ to be the full subcategory of $\cR_\CC(G)$ whose objects are smooth representations $(\pi,V)$ such that for all irreducible subquotients $\pi'$ of $\pi$, the supercuspidal support of $\pi'$ lies in $[M,\sigma]_G$.

    \begin{theorem}[Bernstein Decomposition]
        The category $\cR_\CC(G)$ has a block decomposition into full subcategories
        $$\cR_\CC(G)=\prod_{[M,\sigma]\in\mathfrak{J}(G)}\cR_{[M,\sigma]}(G).$$
    \end{theorem}
    
    \begin{remark}
        In any abstract category of representations $\cR(G)$ of a group $G$ with certain properties (smoothness, for instance) such that the category is closed under direct sums and extensions, one can always decompose $\cR(G)$ into maximal blocks as follows:

        Firstly, we consider an equivalence relation on irreducible representations of $\cR(G)$ generated by the rule that two irreducible representations $(\pi_1,V_1)$ and $(\pi_2,V_2)$ are related if there is some representation $(\sigma,W)\in\cR(G)$ and non-split short exact sequence
        $$0\longrightarrow (\pi_1,V_1)\longrightarrow(\sigma,W)\longrightarrow(\pi_2,V_2)\longrightarrow 0.$$
        For any irreducible $(\pi,V)$ we let $\cR_{[\pi,V]}(G)$ to be the full subcategory of representations such that all simple Jordan-Holder factors are equivalent to $(\pi,V)$ under $\sim$.
        \begin{theorem}
            The category $\cR(G)$ admits a block decomposition into full subcategories 
            $$\cR(G)=\prod_{[\pi,V]}\cR_{[\pi,V]}(G)$$
        \end{theorem}
        The Theorem is direct consequence of the following result.
        \begin{proposition}
            Let $(\sigma,W)\in\cR_{[\pi,V]}(G)$ and $(\sigma',W')\in\cR_{[\pi',V']}(G)$. If $(\pi,V)\not\sim(\pi',V')$, then there are no non-trivial extensions of $(\sigma',W')$ by $(\sigma,W)$. 
        \end{proposition}
        \begin{proof}
            To be written, check the notebook.
        \end{proof}
    \end{remark}


    \section{Bernstein blocks, types and Hecke algebras}
    The Bernstein decomposition states that to understand $\cR(G)$, it is enough to understand $\cR_{[M,\sigma]}(G)$ for each $[M,\sigma]\in\mathfrak{J}(G)$. One can then understand each block using the theory of \textit{types}. 
    \begin{definition}
        Let $[M,\sigma]\in\mathfrak{J}(G)$. A pair $(K,\rho)$ consisting of a compact open subgroup $K$ of $G(F)$ and an irreducible smooth representation $\rho$ of $K$ is an $[M,\sigma]$-type if for any $(\pi,V)\in \cR_\CC(G)$, the following are equivalent:
        \begin{enumerate}
            \item $(\pi,V)\in\cR_{[M,\sigma]}(G).$
            \item $\Hom_K(\rho,\pi|_K)\neq\{0\}$; that is, $\rho\subseteq \pi|_K$.
        \end{enumerate}
    \end{definition}

    \begin{theorem}
        If $(K,\rho)$ is an $[M,\sigma]$-type, then the functor 
        \begin{align*}
            \cR_{[M,\sigma]}(G)&\longrightarrow \End_{G(F)}(\cInd_K^{G(F)}\rho)^{op}-\textrm{mod}\\
            (\pi,V)&\longmapsto\Hom_K(\rho,\pi|_K)
        \end{align*}
        is an equivalence of categories between the block $\cR_{[M,\sigma]}(G)$ and the category of right $\End_{G(F)}(\cInd_K^{G(F)}\rho)$-modules. 
    \end{theorem}
    We note that by Frobenius reciprocity, $$\Hom_K(\rho,\pi|_K)\cong\Hom_{G(F)}(\cInd_K^{G(F)}\rho,\pi),$$ so the former is naturally a right $\End_{G(F)}(\cInd_K^{G(F)}\rho)$-module, since it acts on the latter by precomposition.

    The idea of the proof is to show that if $(K,\rho)$ is a $[M,\sigma]$-type, then $\cInd_K^{G(F)}\rho$ is a projective generator of 
    $\cR_{[M,\sigma]}(G)$, and that the block is equivalent to the full subcategory $\cR_\rho(G)$ whose objects are representations $(\pi,V)$ satisfying $V=V[\rho]$, where $V[\rho]$ is the $G$-submodule of $V$ generated by its $\rho$-isotypical component $V^\rho$. The result then follows by the Morita equivalence. 

    In addition, the Hecke algebra $\End_{G(F)}(\cInd_K^{G(F)}\rho)$ can be described alternatively as a space of functions on $G$ valued on $\End_\CC(W)$, where $W$ is the vector space upon which $\rho$ acts.

    Let $\cH(G,K,\rho)$ denote the space of compactly supported functions $$\varphi:G\longrightarrow\End_\CC(W)$$
    satisfying
    $$\varphi(k_1 g k_2)=\rho(k_1)\circ\varphi(g)\circ\rho(k_2)$$
    for all $k_1,k_2\in K$ and $g\in G(F)$, equipped with a binary operation called \textit{convolution} as follows. If $\varphi_1,\varphi_2\in\cH(G,K,\rho)$, we define the function $\varphi_1*\varphi_2\in\cH(G,K,\rho)$ as
    $$\varphi_1*\varphi_2(g)=\sum_{h\in G(F)/K}\varphi_1(h)\varphi_2(h^{-1}g)=\int_{G(F)}\varphi_1(h)\varphi_2(h^{-1}g)dh,$$
    for $g\in G(F)$, where $dh$ denotes a Haar measure on $G(F)$ chosen to have measure $1$ on $K$. This operation gives $\cH(G,K,\rho)$ the structure of an associative $\CC$-algebra, whose identity element is the function $e:G\to\End_\CC(W)$ supported on $K$ such that $e(k)=\rho(k)$ for all $k\in K$.

    \begin{proposition}
        There are mutually inverse $\CC$-algebra homomorphisms
        \begin{equation}
            \Phi\longmapsto \varphi_\Phi\ :\ \End_{G(F)}(\cInd_K^{G(F)}\rho)\longrightarrow\cH(G,K,\rho)\ :\ \varphi \longmapsto \Phi_\varphi
        \end{equation}
        where
        \begin{align*}
            &\varphi_\Phi(g)(w)=\Phi(e_w)(g)\quad & (g\in G(F), w\in W)\\
            &\Phi_\varphi(f)(g)=\int_{G(F)}\varphi(h)(f(h^{-1}g))dh \quad &(f\in\cInd_K^{G(F)}\rho, g\in G(F)).
        \end{align*}
        Here, the Haar measure $dh$ is chosen so that it has measure $1$ on $K$ and $e_w\in\cInd_K^{G(F)}\rho$ is defined by
        \begin{align*}
            e_w(g)=
            \begin{cases}
                \rho(g)(w) &\text{ if } g\in K,\\
                0 &\text{ otherwise.}.
            \end{cases}
        \end{align*}        
    \end{proposition}
    \begin{proof}
        Some of the important steps:
        \begin{itemize}
            \item The maps are inverses of each other: This follows from 
            $$\Phi_\varphi(e_w)(g)=\int_{gK}\varphi(h)(e_w(h^{-1}g))dh=\int_K\varphi(gk)(e_w(k^{-1}))dk=\int_K\varphi(g)\circ\rho(k)(\rho(k)^{-1}w)=\varphi(g)(w)$$
            and 
            $$\int_{G(F)}\varphi_\Phi(h)(e_w(h^{-1}g))dh=\int_{K}\varphi_\Phi(gk)(e_w(k^{-1}))dk=\int_{K}\varphi_\Phi(g)\circ\rho(k)(\rho(k)^{-1}w)dk=\varphi_\Phi(g)(w)=\Phi(e_w)(g).$$
        \end{itemize}
    \end{proof}

    \section{Depth-zero Hecke algebras for principal series blocks}
    Let $\cR_{[M,\sigma]}(G)$ be a Bernstein block. If $M$ is the maximal torus $T$ (or a conjugate of $T$), then $\sigma=\tilde\chi$ is just a character and the $\cR_{[T,\tilde\chi]}(G)$ is called a principal series block. These are the ones we aim to understand. 

    We remark that the block is completely determined the values of $\tilde\chi$ on $T(\cO)$, which has a natural filtration of open compact subgroups
    $$T(\cO)\supset T(1+\varpi\cO)\supset T(1+\varpi^2\cO)\supset T(1+\varpi^3\cO)\supset\cdots$$
    which forms a basis for the topology at the identity.
    This motivates the following definition:
    \begin{definition}
        The \textit{depth} of $\chi$ is the smallest integer $r$ such that $\chi$ is trivial on $T(1+\varpi^{r+1}\cO)$.
    \end{definition}
    In particular, if $\chi$ has depth-zero, then $\chi$ is trivial on $T(1+\varpi\cO)$ and therefore it factors through the quotient $T(\cO)\rightarrow T(k_F)$. We shall abuse notation and denote the resulting character $T(k_F)\rightarrow \CC^{\times}$ also as $\chi$. Fortunately, for such blocks, the construction of a type is completely explicit.

    Recall that the Iwahori subgroup $I$ of $G$ is defined as 
    $$I=\langle T(\mathcal{\mathcal{O}}); \mathfrak{X}_\alpha(\mathcal{O}),\mathfrak{X}_{-\alpha}(\varpi\mathcal{O})\ |\ \alpha\in\Phi^+\rangle$$
    with its pro-$p$ unipotent radical
    $$I^+=\langle T(1+\varpi\mathcal{\mathcal{O}}); \mathfrak{X}_\alpha(\mathcal{O}),\mathfrak{X}_{-\alpha}(\varpi\mathcal{O})\ |\ \alpha\in\Phi^+\rangle.$$

    We remark that in using the root subgroups of $G$, we have implicitly chosen a Chevalley basis of $\mathfrak{g}$, the Lie algebra of $G$.

    %Let $\mathcal{B}(G,F)$ be the building of $G$ and let $\mathcal{A}(G,T,F)=X_*(T)\otimes\RR\subseteq \mathcal{B}(G,F)$ be the apartment corresponding to $T$, which comes equipped with a hyperplane structure arising from the affine roots. Let 
    %$$I=\langle T(\mathcal{\mathcal{O}}); \mathfrak{X}_\alpha(\mathcal{O}),\mathfrak{X}_{-\alpha}(\varpi\mathcal{O})\ |\ \alpha\in\Phi^+\rangle$$
    %be the Iwahori subgroup of $G$, and let $\textbf{a} \subset\mathcal{A}(G,T,F)$ be the unique alcove such that $G_{x,0}=I$ (first element in the Moy--Prasad filtration) for all $x\in\bf a$.

    In particular, there is an isomorphism
    $$T(\cO)/T(\cO)\cap I^+\cong I/I^+$$
    and therefore $\chi$ determines a character $\rho_\chi$ of $I$ that is trivial on $I^+$. Explicitly, $I$ has an Iwahori decomposition $$I=(I\cap\bar U)\cdot T(\cO)\cdot(I\cap U),$$
    and $\rho_\chi$ extends $\chi$ in $T(\cO)$ and is trivial on $I\cap\bar U$ and $I\cap U$.

    \begin{theorem}
        Suppose that $\chi$ is a depth-zero character of $T(\cO)$. Then $(I,\rho_\chi)$ is a $[T,\tilde\chi]$-type, where $\tilde\chi$ is any extension of $\chi$ to $T(F)$.
    \end{theorem}

    This theorem motivates us to study the Hecke algebra $\cH(G,I,\rho_\chi)$, where $\rho_\chi$ is a character of $I$ arising from a depth-zero character of $T(\cO)$ as described above. 

    When $C=\CC$ has characteristic $0$, one can explicitly describe the structure of $\cH(G,I,\rho_{\chi})$ in terms of a few objects associated to $\chi$. To state the theorem, we first need some preliminaries. Firstly, we let $N:=N_G(T)$ be the normalizer of the torus, and we let $W=N(F)/T(F)$ and $\tilde{W}=N(F)/T(\cO)$ be the Weyl group and the extended Weyl group of $G$ respectively. The Weyl group is a coxeter group generated by a set of simple reflections $S=\{s_\alpha\ |\ \alpha\in\Pi\}$, where $\Pi\subset\Phi$ is any fixed integral basis. There is also a canonical isomorphism of abelian groups $X_*(T)=\Hom_F(\GG_m,T)\longrightarrow T(F)/T(\cO)$ given by $\lambda\mapsto\lambda(\varpi^{-1})$.
    
    There is a canonical surjective homomorphism $\tilde{W}\rightarrow W$ with kernel $X_*(T)$ and a non-canonical section. Therefore there is a non-canonical isomorphism $\tilde{W}=X_*(T)\rtimes W$. The extended Weyl group $\tilde{W}$ comes with an action on the apartment $\mathcal{A}=\mathcal{A}(G,T,F)=X_*(T)\otimes\RR$ that respects the hyperplane structure and therefore permutes the alcoves. The apartment is effectively a vector space over $\RR$ where the origin is the only point fixed by every $s_\alpha,\ \alpha\in\Phi$. The group $X_*(T)$ acts naturally by translations and $W$ is the group of transformations of $\tilde{W}$ fixing the origin. Inside the apartment, we distinguish the Weyl chamber and fundamental alcove of $\Phi$ which are, respectively,
    \begin{align*}
        \mathcal{C}&=\{v\in\mathcal{A}\ |\ 0<\langle\alpha,v\rangle,\forall\alpha\in\Phi^+\}\quad\text{and}\\
        \textbf{a}&=\{v\in\mathcal{A}\ |\ 0<\langle\alpha,v\rangle<1,\forall\alpha\in\Phi^+\}.
    \end{align*}

    The extended Weyl group $\tilde{W}$ contains a subgroup $$W_{\aff}=\ZZ\vPhi\rtimes W=\langle s_a\ |\ a=\alpha+k,\alpha\in\Phi,k\in\ZZ \text{ is an affine root}\rangle,$$ denoted as the affine Weyl group, which acts simply transitively on the set of alcoves. In particular, $W_{\aff}$ is also a Coxeter group generated by the simple reflections $S_{\aff}=S\cup\{s_0\}$ where $s_0$ is the reflection along the hyperplane $P_{\alpha_0,1}=\{v\in\mathcal{A}\ |\ \langle\alpha_0,v\rangle=1\}$. These correspond to reflections along the walls of the fundamental alcove $\mathbf{a}$. It then follows that $\tilde{W}=W_{\aff}\rtimes\Omega$, where $\Omega=\mathrm{Stab}_{\tilde{W}}(\mathbf{a})$. As coxeter groups, both $W$ and $W_{\aff}$ come equipped with a length function. Since $W$ is a parabolic subgroup of $W_{\aff}$, it follows that the length function of both groups coincide on elements of $W$. Moreover, one can extend the length function uniquely to $l:\tilde{W}\rightarrow\ZZ^{\geq0}$ in such a way that $\Omega=\{w\in\tilde{W}:l(w)=0\}$. In fact, one can prove that $l(w)$ equals the number of affine hyperplanes separating $\mathbf{a}$ to $w\cdot\mathbf{a}$.

    We now turn out attention to the character $\chi$ and define analogous associated groups
    \begin{align*}
        &N_{\chi}=\{n\in N(F)|\prescript{n}{}{\chi}=\chi\}\\
        &\tilde{W}_{\chi}=\{w\in \tilde{W}|\prescript{w}{}{\chi}=\chi\}\\
        &W_{\chi}=\{w\in W|\prescript{w}{}{\chi}=\chi\}
    \end{align*}
    with surjective group homomorphisms $N_\chi\rightarrow\tilde{W}_\chi\rightarrow W_\chi$. We remark that nor $\tilde{W}_\chi$ nor $W_\chi$ are coxeter groups in general, and therefore are not Weyl groups of subroot systems of $\Phi$. However, we may define $$\Phi_\chi=\{\alpha\in\Phi:\chi\circ\alpha^\vee|_{\cO^\times}=1\},$$ which is clearly a subroot system of $\Phi$. Naturally, we let $\vPhi_\chi=\{\valpha|\alpha\in\Phi_\chi\}$ and $\Phi_{\chi,\aff}=\{\alpha+k|\alpha\in\Phi_\chi,k\in\ZZ\}$ be the associated coroot system and affine root system to $\Phi_\chi$. 
    
    We also consider the Weyl group $W_\chi^\circ$, affine Weyl group $W_{\chi,\aff}$, Weyl chamber $\mathcal{C}_\chi$ and fundamental alcove $\mathbf{a}_\chi$ associated to $\Phi_\chi$. Explicitly,
    \begin{align*}
        W_\chi^\circ&=\langle s_\alpha|\alpha\in\Phi_\chi\rangle,\\
        W_{\chi,\textrm{aff}}&=\langle s_a | a\in\Phi_{\chi,\aff}\rangle,\\
        \mathcal{C}_\chi=\{v\in&\mathcal{A}(G,T,F)|0<\alpha(v), \forall\alpha\in\Phi_\chi^+\},\\
        \mathbf{a}_\chi=\{v\in&\mathcal{A}(G,T,F)|0<\alpha(v)<1, \forall\alpha\in\Phi_\chi^+\}.
    \end{align*}

    Analogously to the previous case, $W_\chi^\circ$ is a coxeter group generated by a set of simple reflections $S_\chi=\{s_\alpha:\alpha\in\Pi_\chi\}$ along the walls of the Weyl chamber $\mathcal{C}_\chi$, where $\Pi_\chi\subset\Phi_\chi$ is an integral basis. Similarly, $W_{\chi,\aff}$ is a coxeter group generated by a set of simple reflections $S_{\chi,\aff}=\{s_a:a\in\Pi_{\chi,\aff}\}$ along the walls of the fundamental alcove $\mathbf{a}_\chi$, where $\Pi_{\chi,\aff}\subset\Phi_{\chi,\aff}$ is a set of minimal affine roots. Moreover, $W_\chi^\circ$ acts simply transitively on the set of Weyl chambers of $\Phi_\chi$ and $W_{\chi,\aff}$ acts simply transitively on the set of alcoves of $\Phi_\chi$. Finally, $\tilde{W}_\chi$ also decomposes as a semi-direct product $W_{\chi,\aff}\rtimes\Omega_\chi$, where %$\Omega_\chi=\mathrm{Stab}_{\tilde{W}_\chi}(\mathbf{a}_\chi)$
    $$\Omega_\chi=\{w\in\tilde{W}_\chi|w\mathbf{a}_\chi=\mathbf{a}_\chi\}.$$
    Finally, the length function of $W_{\chi,\aff}$ as a coxeter group agrees with that of $W_\chi$ and can be extended uniquely to a function $l_\chi:\tilde{W}_\chi\rightarrow\ZZ^{\geq0}$ such that $\Omega_\chi=\{w\in\tilde{W}_\chi\ |\ l_\chi(w)=0\}$. In fact, $l_\chi(w)$ is the number of affine hyperplanes of $\Phi_\chi$ separating $\mathbf{a}_\chi$ to $w\cdot\mathbf{a}_\chi$.

    \begin{lemma}
        We have that $W_\chi^\circ\subseteq W_\chi$ and $W_{\chi,\aff}\subseteq \tilde{W}_\chi$. If $G=\mathrm{GL}_n$, then $W_\chi^\circ= W_\chi$
    \end{lemma}
    \begin{proof}
        For the first part, it is enough to prove that if $\alpha\in\Phi_\chi$, then $\prescript{s_\alpha}{}{\chi}=\chi$. For this, we note that $T(\cO)$ is an abelian group generated by the elements $\{\cbeta(\lambda)|\beta\in\Phi,\lambda\in\cO^\times\}$. Since 
        $$s_\alpha^{-1}\cbeta(\lambda)s_\alpha\cbeta(\lambda)^{-1}=\check{s_\alpha(\beta)}(\lambda)\check{\beta}(\lambda)^{-1}=s_{\calpha}(\cbeta)(\lambda)\cbeta(\lambda)^{-1}=\cbeta(\lambda)\calpha(\lambda^{-\langle\alpha,\cbeta\rangle})\cbeta(\lambda)=\calpha(\lambda^{-\langle\alpha,\cbeta\rangle}),$$
        it follows that $\prescript{s_\alpha}{}{\chi}(\cbeta(\lambda))=\chi(\cbeta(\lambda))$ for all $\beta\in\Phi$ and $\lambda\in\cO^\times$ and therefore $\prescript{s_\alpha}{}{\chi}=\chi$ as required.

        If $G=\mathrm{GL}_n$, then $\chi=\chi_1\otimes\cdots\otimes\chi_n$ where each $\chi_i$ is the inflation of a character of $k_F^\times$ to $\cO^\times$ trivial on $1+\varpi\cO$. Moreover, $W$ acts by conjugation on $T(F)$ and permutes the $n$ diagonal entries. One can easily see that $W=S_n$ and that the reflections $\{s_\alpha, \alpha\in\Phi^+\}$ correspond to transpositions $\tau_\alpha$ in $S_n$ in a canonical way. Moreover, if $\tau_\alpha,\alpha\in\Phi^+$ permutes the $i$-th and $j$-th diagonal entries with $i<j$, then $\calpha(\lambda)$ is a diagonal matrix with 
        $$\calpha(\lambda)_{k,k}=\begin{cases}
            \lambda &\text{ if } k=i,\\
            \lambda^{-1} &\text{ if } k=j,\\
            1 &\text{ otherwise.}
        \end{cases}$$
        
        Therefore, $\tau_\alpha\in W_\chi$ if and only if $\chi_i=\chi_j$, which is equivalent to $\chi(\calpha(\lambda))=1$ for all $\lambda\in\cO^\times$. If $\sigma\in W=S_n$ is an arbitrary element, then one can easily see that $\sigma\in W_\chi$ if and only if $\chi_i=\chi_{\sigma(i)}$ for each $i=1,\ldots,n$. Thus, if we express $\sigma$ as a product of disjoint cycles, then $\sigma\in W_\chi$ if and only if all the cycles also lie in $W_\chi$, so we may assume that $\sigma$ is a cycle itself. Then we can express $\sigma$ as a product of transposition, all of which permute elements not fixed by $\sigma$. If $\sigma\in W_\chi$, then $\chi_i=\chi_{\sigma(i)}$ and each transposition lies in $W_\chi$ too and thus in $W_\chi^\circ$ by the above argument. This immediately implies that $\sigma\in W_\chi^\circ$ as desired. 
    \end{proof}

    We remark that the latter part of the Lemma breaks down even for $G=\mathrm{SL}_n$. It is still true that $W=S_n$ and that a transposition lies in $W_\chi$ if and only if it lies in $W_\chi^\times$, but it can now happen for a cycle to lie in $W_\chi$ which is not a product of transpositions in $W_\chi^\circ$. Explicitly, if $G=\mathrm{SL}_n$ with $n\geq3$ and $n\mid q-1$, then one can choose a character $\chi_1$ of $k_F^\times$ inflated to $\cO^\times$ of order $n$. Then the character 
    $$\chi(a_1,\ldots,a_n)=\chi_1(a_1)\chi_1^2(a_2)\cdots\chi_1^n(a_n)$$
    satisfies that $W_\chi^\circ=\{1\}$ but the cycle $(12\cdots n)\in W_\chi$ since $a_1\cdots a_n=1$.

    If $G=\mathrm{Sp}_4$ for example, the situation is even worse. Let $\chi=\chi_1\otimes\chi_2$ be a character of the torus, where 
    \begin{equation}
        \chi\left(\begin{smallmatrix}
            s&&&\\
            &t&&\\
            &&s^{-1}&\\
            &&&t^{-1}
        \end{smallmatrix}\right)=\chi_1(s)\chi_2(t).
    \end{equation}
    If $\chi_1=\chi_2=\textrm{sgn}$, then $W_\chi=W$ but $\Phi_\chi$ only contains the short roots, and therefore $W_\chi^\circ\cong C_2\times C_2$ regardless of $q$.

    \begin{lemma}
        If $W_\chi^\circ=W_\chi$, then $\tilde{W}_\chi$ is the extended Weyl group associated to $\Phi_\chi$. 
    \end{lemma}

    Before we state the main theorem, we first need to define the Hecke algebra $\cH(W,S,q_S)$ associated to a coxeter pair $(W,S)$ and a parameter set $q_S:S\rightarrow\QQ^{\geq0}$. This is a $\CC$-algebra with basis $\{T_w:w\in W\}$ and relations
    \begin{align*}
        T_{w_1w_2}&=T_{w_1}T_{w_2}, \ \quad\quad\quad\quad\quad\quad\text{ if } l(w_1w_2)=l(w_1)+l(w_2),\\
        T_s^2&=(q_s-1)T_s+qT-1,\quad \text{ if } s\in S.
    \end{align*}

    \begin{definition}
        Let $\chi$ be a depth-zero character of $T(\cO)$. Then we define 
        $$\cH_\chi:=\cH(W_{\chi,\aff},S_{\chi,\aff},q)\tilde\otimes\CC[\Omega_\chi],$$ 
        where the twisted tensor product is the usual tensor product in the underlying vector spaces, but where multiplication is given by 
        $$(T_{w_1}\otimes e_{\sigma_1})(T_{w_2}\otimes e_{\sigma_2})=T_{w_1}T_{\sigma_1w_2\sigma_1^{-1}}\otimes e_{\sigma_1\sigma_2}$$
    \end{definition}
    We are now ready to state the main theorem. To state it, we fix an extension $\check{\chi}:N(F)\rightarrow\CC^\times$ of $\chi$ and we choose a section $\tilde{W}_\chi\rightarrow N_\chi$, $w\mapsto n_w$ such that $n_{w_1w_2}=n_{w_1}n_{w_2}$, which they both exist. We abuse notation and write $[IwI]_{\check{\chi}}\in\cH(G,I,\rho_\chi)$ for the function supported on $In_wI$ and having value $\check{\chi}(n_w)$ on $n_w$. Since the double cosset $In_wI$ is independent of the lift, we shall simply write $IwI$. However, we remark that the function $[IwI]_{\check{\chi}}$ does depend on the lift $n_w$.
    \begin{theorem}
        Let $\chi$ be a character of $T(\cO)$ and let $\check{\chi}:N(F)\rightarrow\CC^\times$ be an extension of $\chi$. Then there is a support-preserving algebra isomorphism 
        $$\cH(G,I,\rho_\chi)\longrightarrow\cH_\chi$$
        such that for all $w\in \tilde{W}_\chi$ with $w=w'\sigma$, $w'\in W_{\chi,\aff}, \sigma\in\Omega_\chi$,
        it sends $q^{-l(w)/2}[IwI]_{\check{\chi}}$ to $q^{-l_\chi(w)/2}(T_{w'}\otimes e_\sigma)$.
    \end{theorem}

    To prove the theorem, the first observation is that the support of $\cH(G,I,\rho_\chi)$ is the intertwiner set $$\mathrm{Supp}\cH(G,I,\rho_\chi)=I_G(\rho_\chi)=IN_\chi I=\bigsqcup_{w\in\tilde{W}_\chi}IwI$$ and that therefore $\{[IwI]_{\check{\chi}}\ |\ w\in\tilde{W}_\chi\}$ is a $\CC$-basis for $\cH(G,I,\rho_\chi)$.

    Secondly, we may define, for each $w\in\tilde{W}_\chi$, the element
    $$\varphi_w:=q^{(l_\chi(w)-l(w))/2}[IwI]_{\check{\chi}},$$
    corresponding to $T_{w'}\otimes e_\sigma$ under the isomorphism. Then the proof of the theorem is a direct consequence of the following result.

    \begin{proposition}
        The elements $\varphi_w, w\in\tilde{W}_\chi$ satisfy the following relations:
        \begin{enumerate}
            \item (Additive relations) $\varphi_{w_1w_2}=\varphi_{w_1}*\varphi_{w_2},$ if $l_\chi(w_1w_2)=l_\chi(w_1)+l_\chi(w_2)$.
            \item (Quadratic relations) $\varphi_s^2=(q-1)\varphi_s+q\varphi_1,$ if $s\in S_{\chi,\aff}$. 
        \end{enumerate} 
    \end{proposition}
    

    \section{Hecke algebras in positive characteristic}
    
    When the field $C$ of values of the representation has positive characteristic, then many of the previous results do not hold. For instance, the category $\cR_C(G)$ does not have a nice block decomposition similar to the Bernstein decomposition for complex smooth representations. As a consequence, there is no analogous theory of types for positive characteristic. Nevertheless, for the setting of depth-zero representations, a bijection is still expected between simple right $\cH(G,I,\rho_\chi)$-modules and irreducible $C$-representations $(\pi,V)$ of $G(F)$ such that the $\rho_\chi$-isotypic part of $\pi|_I$ is non-zero. 

    This last point suggests that studying the structure of $\cH(G,I,\rho_\chi)$ yields relevant information about the structure of $\cR_C(G)$. Fortunately, most steps in the proof of the theorem still hold if we replace $\CC$ for an algebraically closed field of positive characteristic other than $p$. It is still true that the elements $\varphi_w, w\in\tilde{W}_\chi$ still form a basis for $\cH(G,I,\rho_\chi)$, that $\varphi_{w_1w_2}=\varphi_{w_1}*\varphi_{w_2}$ whenever $l_\chi(w_1w_2)=l_\chi(w_1)+l_\chi(w_2)$ and that the elements $\varphi_s, s\in S_{\chi,\aff}$ form a two dimensional subalgebra inside $\cH(G,I,\chi_\rho)$. However, the calculations for the coefficients for the quadratic relations rely crucially on semisimplicity of certain representations and character theory, both of which fail for small positive characteristic. 

    The aim of this document is prove in a direct, explicit way, that the same quadratic relations hold even when the characteristic is small when $G$ is a reductive group of type $A_n$.

    The first part of the proof can be easily deduced from the following fact.

    \begin{lemma}
        Let $w\in\tilde{W}_\chi$. Then
        $$[I:I\cap wIw^{-1}]=q^{l(w)}.$$
    \end{lemma}

    \begin{lemma}
        Let $s\in S_{\chi,\aff}$. Then
        $$\varphi_s^2(1)=q.$$
    \end{lemma}
    \begin{proof}
        This is a direct computation. Indeed,
        \begin{equation*}
            \varphi_s^2(1)=\int_{IsI}\varphi_s(h)\varphi_s(h^{-1})dh=\chi(s^2)^{-1}\varphi_s(s)^2[IsI:I]=q^{1-l(s)}[I:I\cap sIs^{-1}]=q.
        \end{equation*}
        %since $s^2=\calpha(\pm1)$ for $\alpha\in\Phi_\chi$.
    \end{proof}

    Then, the hard part of the proof is to show that $\varphi_s^2(s)=(q-1)\varphi_s(s)=(q-1)q^{1-l(s)}\check{\chi}(s)$ if $s\in S_{\chi,\aff}$.
    The first step for proving this result consists in 

    \subsection{Quadratic relation for a canonical example}
    We now prove the quadratic relation for a family of reflections containing one reflection for each possible length. We remark that any $s\in S_{\chi,\aff}$ is a reflection and, as such, $l(s)$ will always be odd.

    Let $n\geq1$ be a positive integer and let $G=\mathrm{GL}_{n+1}$. Choose a set of simple roots $\Pi=\{\alpha_1,\ldots,\alpha_n\}$ with longest root $\alpha_0=\alpha_1+\cdots+\alpha_n$. In this case, the Weyl group $W=N(F)/T(F)$ is generated by $S=\{w_{\alpha_1},\ldots,w_{\alpha_n}\}$ and the extended Weyl group $\tilde{W}=N(F)/T(\cO)$ decomposes as a semidirect product of the affine Weyl group $W_{\aff}=N(F)|_{\det\in\cO^\times}/T(\cO)$ and the alcove stabilizer $\Omega=\langle\sigma\rangle\cong\ZZ,$ where
    $$\rho=\begin{pmatrix}
        0&1&&\\
        &\ddots&\ddots&\\
        &&0&1\\
        -\varpi &&&0\\
    \end{pmatrix}.$$

    As discussed above, the affine Weyl group is a coxeter group, where the simple reflections are given by 
    $$S_{\aff}=\{w_{\alpha_1}(1),\ldots,w_{\alpha_n}(1),w_{\alpha_0}(\varpi^{-1})\}.$$

    Let $\chi=\chi_0\otimes\chi_1\otimes\cdots\otimes\chi_n$ be a character of the torus, where each $\chi_i$ is a depth-zero character of $\cO^\times$. Assume that $\chi_0=\chi_n$ and with all others $\chi_i$ distinct characters. Under these assumptions, 
    $$N_\chi=\begin{pmatrix}
        *&&&&\\
        &*&&&\\
        &&\ddots&&\\
        &&&*&\\
        &&&&*\\
    \end{pmatrix}\bigsqcup\begin{pmatrix}
        &&&&*\\
        &*&&&\\
        &&\ddots&&\\
        &&&*&\\
        *&&&&\\
    \end{pmatrix},$$
    and in particular

    \begin{equation*}
        S_{\chi,\aff}=\left\{w_{\alpha_0}(1)=\begin{pmatrix}
            &&&&1\\
            &1&&&\\
            &&\ddots&&\\
            &&&1&\\
            1&&&&\\
        \end{pmatrix}, w_{\alpha_0}(\varpi^{-1})=\begin{pmatrix}
            &&&&\varpi^{-1}\\
            &1&&&\\
            &&\ddots&&\\
            &&&1&\\
            -\varpi&&&&\\
        \end{pmatrix}\right\}
    \end{equation*}

    \begin{lemma}
        Under the circumstances discussed above, we have that $l(w_{\alpha_0}(\varpi^{-1}))=1$ and $l(w_{\alpha_0}(1))=2n-1$.
    \end{lemma}
    \begin{proof}
        The first part of the statement is immediate since $w_{\alpha_0}\in S_{\aff}$ is a simple reflection. For the second part, we first note that $w_{\alpha_0}(1)$ is naturally an element of the Weyl group $W$, generated by $S=\{w_{\alpha_1},\ldots,w_{\alpha_n}\}$, and therefore $l(\alpha_0(1))$ coincides with its length as an element of $W$. Thus
        $$l(w_{\alpha_0})=|\{\alpha\in\Phi^+:w_{\alpha_0}(\alpha)\in\Phi^-\}|.$$
        Now, if $\alpha\in\Phi^+$, then $w_{\alpha_0}(\alpha)=\alpha-\langle\alpha,\calpha_0\rangle\alpha_0\in\Phi^-$if and only if $\langle\alpha\calpha_0\rangle>0$. Since $\langle\alpha_i,\calpha_0\rangle=1$ if $i=1,n$ and $0$ otherwise. Consequently, 
        $$\{\alpha\in\Phi^+:w_{\alpha_0}(\alpha)\in\Phi^-\}=\{\alpha_1,\alpha_1+\alpha_2,\ldots,\alpha_0,\ldots,\alpha_{n-1}+\alpha_n,\alpha_n\},$$
        which has size $2n-1$ as desired.
    \end{proof}

    The proof of the quadratic equation for $s_0=w_{\alpha_0}(\varpi^{-1})$ is straightforward. For the sake of completeness, and as means of example, we give a full proof.
    
    Since $l(s_0)=1$, we consider $\varphi_{s_0}=[Is_0I]_{\check{\chi}}$. Then
    $$\varphi_{s_0}^2(s_0)=\int_{G(F)}\varphi_{s_0}(s_0h)\varphi_{s_0}(h^{-1})dh$$
    and the integral is zero unless $h\in Is_0I\cap s_0Is_0I$. To understand this integral, we note that for any $x\in G(F)$, there is a bijection
    \begin{align*}
        IxI/I&\longleftrightarrow I/(I\cap xIx^{-1})\\
        yxI&\longmapsto y(I\cap xIx^{-1})
    \end{align*}
    and that 
    \begin{equation*}
        I\cap s_0Is_0^{-1}=\begin{pmatrix}
            \cO^\times & \cO & \cdots & \cO & \cO\\
            \varpi\cO & \cO^\times & \ddots &  & \cO\\
            \vdots &\ddots & \ddots & \ddots & \vdots \\
            \varpi\cO & \varpi\cO & \ddots & \cO^\times & \cO\\
            \varpi^2\cO & \varpi\cO & \ldots & \varpi\cO & \cO^\times
        \end{pmatrix}.
    \end{equation*}
    Therefore, by fixing a set of representatives $R$ of $k_F$ in $\cO$, we obtain
    \begin{equation*}
        Is_0I=\bigsqcup_{c\in R} u_cs_0I,\quad\text{where}\quad u_c=
        \begin{pmatrix}
            %1 & 0 & \cdots & 0 & 0\\
            %0 & 1 & \ddots &  & 0\\
            %\vdots &\ddots & \ddots & \ddots & \vdots \\
            %0 & 0 & \ddots & 1 & 0\\
            %\varpi c & 0 & \ldots & 0 & 1
            1 & & \\
            & 1 & \\
            \varpi c & & 1
        \end{pmatrix}.
    \end{equation*}

    A left cosset $u_cs_0I$ is contained in $s_0Is_0I$ if and only if there is some $z\in R$ such that $s_0u_cs_0u_zc_0\in I$, and a simple calculation shows that this is the case if and only if $c\neq 0\pmod{\varpi\cO}$, in which case $z=c^{-1}\pmod{\varpi\cO}$. Hence, $Is_0I\cap s_0Is_0I=\sqcup_{\substack{c\in R\\c\neq0}}u_cs_0I$ and moreover 
    $$\iota_c:=s_0u_cs_0u_{1/c}s_0=\begin{pmatrix}
        -c &&&& \\
        & 1 &&& \\
        && \ddots && \\
        &&& 1 & \\
        p &&&& -1/c \\
    \end{pmatrix}\in I,$$
    so $\rho_\chi(\iota_c)=\chi_0(-c)\chi_n(-1/c)=1$ since $\chi_0=\chi_n$. Consequently, 
    \begin{align*}
        \varphi_{s_0}^2(s_0)=\sum_{\substack{c\in R\\c\neq0}}\int_{u_cs_0I}\varphi_{s_0}(sh)\varphi_{s_0}(h^{-1})dh=\sum_{\substack{c\in R\\c\neq0}}\int_{I}\varphi_{s_0}(su_csk)\varphi_{s_0}(k^{-1}s_0^{-1}u_c^{-1})dk=\\
        =\sum_{\substack{c\in R\\c\neq0}}\varphi_{s_0}(\iota_cs_0^{-1}u_{1/c})\varphi_{s_0}(s_0^{-1}u_c^{-1})=\varphi_{s_0}(s_0)^2\sum_{\substack{c\in R\\c\neq0}}\rho_\chi(\iota_c)\rho_\chi(u_{1/c})^{-1}\rho_\chi(u_c)^{-1}=q-1,
    \end{align*}
    and this completes the proof that $\varphi_{s_0}^2=(q-1)\varphi_{s_0}+q\varphi_1$.
    
    \newpage

    The proof of the previous result also shows that 
    \begin{equation*}
        I\cap w_{\alpha_0}(1)I w_{\alpha_0}(1)^{-1}=\begin{pmatrix}
            \cO^\times&\varpi\cO&\varpi\cO&\cdots&\varpi\cO&\varpi\cO\\
            \varpi\cO&\cO^\times&\cO&\cdots&\cO&\varpi\cO\\
            \varpi\cO&\varpi\cO&\ddots&\ddots&\vdots&\vdots\\
            \vdots&\vdots&\ddots&\ddots&\cO&\varpi\cO\\
            \varpi\cO&\varpi\cO&\ldots&\varpi\cO&\cO^\times&\varpi\cO\\
           \varpi\cO&\varpi\cO&\ldots&\varpi\cO&\varpi\cO&\cO^\times\\
        \end{pmatrix}
    \end{equation*}
    and using the bijection 
    \begin{align*}
        Iw_{\alpha_0}I/I&\longleftrightarrow I/(I\cap w_{\alpha_0}(1)I w_{\alpha_0}(1)^{-1})\\
        xw_{\alpha_0}I&\longmapsto x(I\cap w_{\alpha_0}(1)I w_{\alpha_0}(1)^{-1})
    \end{align*}
    we can express the double cosset $Iw_{\alpha_0}(1)I$ as a disjoint union of left cossets of $I$. Explicitly, we may choose a set of representatives $R$ of $k_F$ in $\cO$. Then one deduces that
    \begin{equation*}
        Iw_{\alpha_0}(1)I=\bigsqcup_{(\mathbf{a},\mathbf{b},c)\in R^{2n-1}}u_{\mathbf{a},\mathbf{b},c}w_{\alpha_0}(1)I\quad\text{where}\quad u_{\mathbf{a},\mathbf{b},c}=\begin{pmatrix}
            1&a_1&a_2&\cdots&a_{n-1}&c\\
            0&1&0&\cdots&0&b_{n-1}\\
            \vdots&\ddots&\ddots&\ddots&\vdots&\vdots\\
            \vdots&&\ddots&\ddots&0&b_2\\
            \vdots&&&\ddots&1&b_1\\
            0&\ldots&\ldots&\ldots&0&1\\
        \end{pmatrix}
    \end{equation*}

\end{document}